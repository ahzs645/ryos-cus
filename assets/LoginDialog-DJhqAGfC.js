import{r as X,z as F,j as e}from"./ui-core-D0pDhx0h.js";import{a as K,u as V,av as G,aw as B,ax as u,a4 as s,ay as q,aA as J,B as Q,a5 as Y,a6 as Z,a7 as C,a8 as O,a9 as L,az as v,aq as g}from"./index-CoK7-gOT.js";function U(o){const d=o==="xp"||o==="win98",l=o==="macosx",c=o==="system7",S=l?"rgba(0, 0, 0, 0.2)":c||d?"#808080":"rgba(0, 0, 0, 0.2)",b=`flex w-full ${l?"":"h-6"} space-x-0.5 shadow-none`,y="bg-[#E3E3E3] border-b border-[#808080]",r="bg-[#D4D4D4] data-[state=active]:bg-[#E3E3E3] border border-[#808080] data-[state=active]:border-b-[#E3E3E3]",m="bg-[#E3E3E3] border border-t-0 border-[#808080]",p="aqua-tab-bar",A="aqua-tab",j="aqua-tab-content",P=`relative flex-1 ${l?"":"h-6"} px-2 ${l?"":"-mb-[1px]"} rounded-t shadow-none! text-[16px]`,_=`mt-0 h-[calc(100%-2rem)] ${l?"":"bg-white"} border border-black/20`;return{tabListClasses:`${b} ${c?y:l?p:""}`,tabTriggerClasses:`${P} ${c?r:l?A:""}`,tabContentClasses:`${_} ${c?m:l?j:""}`,separatorStyle:{borderColor:S}}}function te({isOpen:o,onOpenChange:d,initialTab:l="login",usernameInput:c,onUsernameInputChange:T,passwordInput:S,onPasswordInputChange:b,onLoginSubmit:y,isLoginLoading:r,loginError:m,newUsername:p,onNewUsernameChange:A,newPassword:j,onNewPasswordChange:P,onSignUpSubmit:_,isSignUpLoading:x,signUpError:N}){const[n,z]=X.useState(l),h=K(t=>t.current),a=h==="xp"||h==="win98",f=U(h),{t:i}=V(),w=i("common.auth.dialogTitle");X.useEffect(()=>{o&&z(l)},[o,l]);const R=async t=>{t==null||t.preventDefault(),n==="login"?r||await y():x||await _()},I=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:s("text-gray-700",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.username")}),e.jsx(g,{autoFocus:n==="login",value:c,onChange:t=>T(t.target.value),className:s("shadow-none h-8",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:s("text-gray-700",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.password")}),e.jsx(g,{type:"password",value:S,onChange:t=>b(t.target.value),className:s("shadow-none h-8",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},disabled:r})]})]}),W=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:s("text-gray-700",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.username")}),e.jsx(g,{autoFocus:n==="signup",value:p,onChange:t=>A(t.target.value),className:s("shadow-none h-8",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},disabled:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:s("text-gray-700",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.password")}),e.jsx(g,{type:"password",value:j,onChange:t=>P(t.target.value),className:s("shadow-none h-8",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},disabled:x})]})]}),k=n==="login"?r:x,D=n==="login"?m:N,E=F.useRef(r),$=F.useRef(x);F.useEffect(()=>{const t=E.current&&!r&&!m&&n==="login",H=$.current&&!x&&!N&&n==="signup";o&&(t||H)&&d(!1),E.current=r,$.current=x},[o,r,x,m,N,n,d]);const M=e.jsx("div",{className:"pt-3 pb-6 px-6",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs(G,{value:n,onValueChange:t=>z(t),className:"w-full",children:[a?e.jsx(B,{asChild:!0,children:e.jsxs("menu",{role:"tablist",className:"h-7! flex justify-start! p-0 -mt-1 -mb-[2px] bg-transparent shadow-none grid grid-cols-2 w-full",children:[e.jsx(u,{value:"signup",className:s("relative px-4 py-1.5 rounded-none bg-white data-[state=active]:bg-black data-[state=active]:text-white data-[state=active]:z-10 data-[state=inactive]:border-r-0","font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]"),style:{fontFamily:'"Pixelated MS Sans Serif", "ArkPixel", Arial',fontSize:"11px"},children:i("common.auth.createAccount")}),e.jsx(u,{value:"login",className:s("relative px-4 py-1.5 rounded-none bg-white data-[state=active]:bg-black data-[state=active]:text-white data-[state=active]:z-10","font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]"),style:{fontFamily:'"Pixelated MS Sans Serif", "ArkPixel", Arial',fontSize:"11px"},children:i("common.auth.logIn")})]})}):e.jsxs(B,{className:s(f.tabListClasses,"grid grid-cols-2 w-full"),children:[e.jsx(u,{value:"signup",className:s(f.tabTriggerClasses,"px-4 py-1.5",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.createAccount")}),e.jsx(u,{value:"login",className:s(f.tabTriggerClasses,"px-4 py-1.5",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i("common.auth.logIn")})]}),e.jsx(q,{value:"signup",className:f.tabContentClasses,children:e.jsx("div",{className:"p-4",children:W()})}),e.jsx(q,{value:"login",className:f.tabContentClasses,children:e.jsx("div",{className:"p-4",children:I()})})]}),D&&e.jsx("p",{className:s("text-red-600 mt-3",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:D}),e.jsx(J,{className:"mt-6 gap-1 sm:justify-end",children:e.jsx(Q,{type:"submit",variant:"retro",disabled:k||(n==="login"?!c.trim()||!S.trim():!p.trim()),className:s("w-full sm:w-auto h-7",a?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:a?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:a?"11px":void 0},children:i(k?n==="login"?"common.auth.loggingIn":"common.auth.creatingAccount":n==="login"?"common.auth.logIn":"common.auth.createAccount")})})]})});return e.jsx(Y,{open:o,onOpenChange:d,children:e.jsx(Z,{className:s("max-w-[400px]",a&&"p-0 overflow-hidden"),style:a?{fontSize:"11px"}:void 0,onKeyDown:t=>t.stopPropagation(),children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{children:w}),e.jsx("div",{className:"window-body",children:M})]}):h==="macosx"?e.jsxs(e.Fragment,{children:[e.jsx(C,{children:w}),M]}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx(O,{className:"font-normal text-[16px]",children:w}),e.jsx(L,{className:"sr-only",children:i(n==="login"?"common.auth.loginDescription":"common.auth.signupDescription")})]}),M]})})})}export{te as L,U as g};
