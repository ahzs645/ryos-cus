import{r as Y,j as F}from"./ui-core-BpsHYXg8.js";import"./react-CyQK0IK8.js";function T($={}){const E=Y.useRef(null),{width:M,height:g,position:j="fixed",className:A}=$;return Y.useEffect(()=>{const a=E.current;if(!a)return;const f=a.getContext("2d");if(!f)return;let I;const S=()=>{typeof M=="number"&&typeof g=="number"?(a.width=Math.max(1,Math.floor(M)),a.height=Math.max(1,Math.floor(g))):(a.width=window.innerWidth,a.height=window.innerHeight)};S();const R=typeof M=="number"&&typeof g=="number",h=64,w=20,y=20,d=[];(()=>{for(let n=0;n<y;n++){d[n]=[];for(let t=0;t<w;t++)d[n][t]=1}const r=(n,t)=>{const e=[[0,-2],[2,0],[0,2],[-2,0]];for(let o=e.length-1;o>0;o--){const i=Math.floor(Math.random()*(o+1));[e[o],e[i]]=[e[i],e[o]]}for(const[o,i]of e){const s=n+o,l=t+i;s>0&&s<w-1&&l>0&&l<y-1&&d[l][s]===1&&(d[t+i/2][n+o/2]=0,d[l][s]=0,r(s,l))}};d[1][1]=0,r(1,1)})();let D=1.5*h,C=1.5*h,c=0;const P=2,k=.02,x=Math.PI/3,v=R?90:120,u=r=>{const n=Math.sin(r),t=Math.cos(r);let e=0;const o=1e3,i=2;for(;e<o;){const s=D+t*e,l=C+n*e,m=Math.floor(s/h),p=Math.floor(l/h);if(m<0||m>=w||p<0||p>=y)return o;if(d[p][m]===1)return e;e+=i}return o};let b=0,z=0;const H=()=>{const r=u(c),n=u(c-Math.PI/4),t=u(c+Math.PI/4);r<h*1.5?(n>t?b=-1:b=1,z++):(b=0,z=0),z>50&&(c+=Math.PI/2,z=0),c+=b*k*2;const e=D+Math.cos(c)*P,o=C+Math.sin(c)*P,i=Math.floor(e/h),s=Math.floor(o/h);i>=0&&i<w&&s>=0&&s<y&&d[s][i]===0&&(D=e,C=o)},L=()=>{const r=f.createLinearGradient(0,0,0,a.height);r.addColorStop(0,"#001133"),r.addColorStop(.5,"#002244"),r.addColorStop(.5,"#111111"),r.addColorStop(1,"#222222"),f.fillStyle=r,f.fillRect(0,0,a.width,a.height);const n=a.width/v;for(let t=0;t<v;t++){const e=c-x/2+t/v*x,o=u(e),i=o*Math.cos(e-c),s=h*a.height/i,l=(a.height-s)/2,m=Math.max(0,Math.min(255,255-i*.3)),p=`rgb(${m*.3}, ${m*.5}, ${m})`;if(f.fillStyle=p,f.fillRect(t*n,l,n+1,s),t>0){const W=u(c-x/2+(t-1)/v*x);Math.abs(o-W)>10&&(f.fillStyle="rgba(0,0,0,0.3)",f.fillRect(t*n,l,2,s))}}},X=()=>{H(),L(),I=requestAnimationFrame(X)};return X(),R||window.addEventListener("resize",S),()=>{cancelAnimationFrame(I),R||window.removeEventListener("resize",S)}},[M,g]),F.jsx("canvas",{ref:E,className:`${j==="fixed"?"fixed":"absolute"} inset-0 w-full h-full ${A??""}`,style:{background:"black"}})}export{T as Maze};
