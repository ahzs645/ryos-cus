import{r as l,j as e,k as qr}from"./ui-core-D0pDhx0h.js";import{c as qt,u as bt,a as Jt,M as Jr,b as dt,d as ut,e as mt,f as ne,g as we,h as Ct,i as Rt,j as At,k as D,_ as Ke,S as Kt,l as Kr,m as Xr,Y as Ne,$ as $e,a0 as Yr,a1 as Gt,a2 as Vt,a3 as R,a4 as We,s as lr,t as or,v as cr,w as pr,x as Dt,B as Ie,a5 as Qr,a6 as Zr,a7 as _t,a8 as Lr,a9 as es,aa as dr,ab as xt,ac as ft,ad as ts,ae as gt,C as rs,af as ss,n as Ht,o as Wt,ag as Tt,ah as ns,D as ur,p as mr,q as hr,r as xr,E as as,ai as tt,aj as rt,ak as is,al as ls,am as He,an as os,Z as cs,ao as ps,ap as ds,aq as us,I as ms,H as hs,J as xs,ar as fs,G as Bt}from"./index-DImvd7fi.js";import{H as fr,S as gr,u as gs}from"./useTerminalSounds-kYjdChO6.js";import{u as bs,D as ws}from"./ai-sdk-CIHyILzO.js";import{C as ys}from"./chevron-left-BcYR-_jx.js";import{A as st,m as ke}from"./motion-DC7C-474.js";import{X as vs}from"./x-Igw9LTia.js";import{S as js}from"./search-DBw_-BtX.js";import"./react-CyQK0IK8.js";import"./media-player-Dfptv93o.js";import"./zustand-CwjPl1Tm.js";import"./tiptap-CPHiBm_b.js";import"./ui-form-Bg85K0S3.js";import"./audio-DxkJfdUY.js";import"./pusher-BvD42uFZ.js";import"./hangul-CIZ_Rl7P.js";import"./three-BOJBN814.js";import"./appletAuthBridge-gdg5QSWM.js";import"./plus-DyjjL6QD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],Ns=qt("Blend",ks);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],Es=qt("Dot",Is);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ts=qt("History",Ss),br=(o,c)=>o.children&&o.children.length>0?e.jsxs(Ct,{children:[e.jsxs(Rt,{className:"text-md h-6 px-3 flex items-center gap-2",children:[e.jsx(Ke,{name:"directory.png",alt:"Folder",className:"w-4 h-4 [image-rendering:pixelated]"}),o.title]}),e.jsx(At,{className:"max-w-xs",children:o.children.map(d=>br(d,c))})]},o.title):o.url?e.jsxs(ne,{onClick:()=>c(o.url,o.year),className:"text-md h-6 px-3 flex items-center gap-2",children:[o.favicon&&typeof navigator<"u"&&"onLine"in navigator&&navigator.onLine?e.jsx("img",{src:o.favicon,alt:"",className:"w-4 h-4",onError:d=>{d.currentTarget.src="/icons/default/ie-site.png"}}):e.jsx(Ke,{name:"ie-site.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),o.title,o.year&&o.year!=="current"&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",o.year,")"]})]},o.url):null;function $s({onRefresh:o,onStop:c,onHome:d,onShowHelp:$,onShowAbout:S,isLoading:v,favorites:f=[],history:j=[],onAddFavorite:te,onClearFavorites:I,onResetFavorites:ae,onNavigateToFavorite:F,onNavigateToHistory:U,onFocusUrlInput:p,onClose:y,onGoBack:K,onGoForward:Z,canGoBack:E,canGoForward:T,onClearHistory:q,onOpenTimeMachine:oe,onEditFuture:ye,language:V="auto",location:Y="auto",onLanguageChange:u,onLocationChange:g,year:Ce="current",onYearChange:Q,onSharePage:A}){var de;const{t:i}=bt(),[b,B]=l.useState(!1),J="internet-explorer",L=new Date().getFullYear(),H=[...Array.from({length:8},(n,ee)=>(2030+ee*10).toString()).filter(n=>parseInt(n)!==L),"2150","2200","2250","2300","2400","2500","2750","3000"].sort((n,ee)=>parseInt(ee)-parseInt(n)),ce=["1000 BC","1 CE","500","800","1000","1200","1400","1600","1700","1800","1900","1910","1920","1930","1940","1950","1960","1970","1980","1985","1990",...Array.from({length:L-1991+1},(n,ee)=>(1991+ee).toString()).filter(n=>parseInt(n)!==L)].reverse(),re=Jt(n=>n.current),me=re==="xp"||re==="win98";return e.jsxs(Jr,{inWindowFrame:me,children:[e.jsxs(dt,{children:[e.jsx(ut,{className:"text-md px-2 py-1 border-none focus-visible:ring-0",children:i("common.menu.file")}),e.jsxs(mt,{align:"start",sideOffset:1,className:"px-0",children:[e.jsx(ne,{onClick:p,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.goToUrl")}),e.jsx(ne,{onClick:A,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.sharePage")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:oe,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.openTimeMachine")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:y,className:"text-md h-6 px-3",children:i("common.menu.close")})]})]}),e.jsxs(dt,{children:[e.jsx(ut,{className:"px-2 py-1 text-md focus-visible:ring-0",children:i("common.menu.edit")}),e.jsxs(mt,{align:"start",sideOffset:1,className:"px-0",children:[e.jsx(ne,{onClick:o,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.refresh")}),e.jsx(ne,{onClick:c,disabled:!v,className:v?"text-md h-6 px-3":"text-gray-400 text-md h-6 px-3",children:i("apps.internet-explorer.menu.stop")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsxs(Ct,{children:[e.jsx(Rt,{className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.year")}),e.jsxs(At,{className:"min-w-[120px] max-h-[400px] overflow-y-auto",children:[H.map(n=>e.jsx(D,{checked:Ce===n,onCheckedChange:ee=>{ee&&(Q==null||Q(n))},className:"text-md h-6 px-3 text-blue-600",children:n},n)),e.jsx(D,{checked:Ce==="current",onCheckedChange:n=>{n&&(Q==null||Q("current"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.now")}),ce.map(n=>e.jsx(D,{checked:Ce===n,onCheckedChange:ee=>{ee&&(Q==null||Q(n))},className:`text-md h-6 px-3 ${parseInt(n)<=1995?"text-blue-600":""}`,children:n},n))]})]}),e.jsxs(Ct,{children:[e.jsx(Rt,{className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.language")}),e.jsxs(At,{className:"min-w-[160px]",children:[e.jsx(D,{checked:V==="auto",onCheckedChange:n=>{n&&(u==null||u("auto"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.auto")}),e.jsx(D,{checked:V==="english",onCheckedChange:n=>{n&&(u==null||u("english"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.english")}),e.jsx(D,{checked:V==="chinese",onCheckedChange:n=>{n&&(u==null||u("chinese"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.chinese")}),e.jsx(D,{checked:V==="japanese",onCheckedChange:n=>{n&&(u==null||u("japanese"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.japanese")}),e.jsx(D,{checked:V==="korean",onCheckedChange:n=>{n&&(u==null||u("korean"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.korean")}),e.jsx(D,{checked:V==="french",onCheckedChange:n=>{n&&(u==null||u("french"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.french")}),e.jsx(D,{checked:V==="spanish",onCheckedChange:n=>{n&&(u==null||u("spanish"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.spanish")}),e.jsx(D,{checked:V==="portuguese",onCheckedChange:n=>{n&&(u==null||u("portuguese"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.portuguese")}),e.jsx(D,{checked:V==="german",onCheckedChange:n=>{n&&(u==null||u("german"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.german")}),e.jsx(D,{checked:V==="welsh",onCheckedChange:n=>{n&&(u==null||u("welsh"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.welsh")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(D,{checked:V==="latin",onCheckedChange:n=>{n&&(u==null||u("latin"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.latin")}),e.jsx(D,{checked:V==="sanskrit",onCheckedChange:n=>{n&&(u==null||u("sanskrit"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.sanskrit")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(D,{checked:V==="alien",onCheckedChange:n=>{n&&(u==null||u("alien"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.alien")}),e.jsx(D,{checked:V==="ai_language",onCheckedChange:n=>{n&&(u==null||u("ai_language"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.aiLanguage")}),e.jsx(D,{checked:V==="digital_being",onCheckedChange:n=>{n&&(u==null||u("digital_being"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.digitalBeing")})]})]}),e.jsxs(Ct,{children:[e.jsx(Rt,{className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.location")}),e.jsxs(At,{className:"min-w-[160px]",children:[e.jsx(D,{checked:Y==="auto",onCheckedChange:n=>{n&&(g==null||g("auto"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.auto")}),e.jsx(D,{checked:Y==="united_states",onCheckedChange:n=>{n&&(g==null||g("united_states"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.unitedStates")}),e.jsx(D,{checked:Y==="china",onCheckedChange:n=>{n&&(g==null||g("china"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.china")}),e.jsx(D,{checked:Y==="japan",onCheckedChange:n=>{n&&(g==null||g("japan"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.japan")}),e.jsx(D,{checked:Y==="korea",onCheckedChange:n=>{n&&(g==null||g("korea"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.korea")}),e.jsx(D,{checked:Y==="canada",onCheckedChange:n=>{n&&(g==null||g("canada"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.canada")}),e.jsx(D,{checked:Y==="uk",onCheckedChange:n=>{n&&(g==null||g("uk"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.unitedKingdom")}),e.jsx(D,{checked:Y==="france",onCheckedChange:n=>{n&&(g==null||g("france"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.france")}),e.jsx(D,{checked:Y==="germany",onCheckedChange:n=>{n&&(g==null||g("germany"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.germany")}),e.jsx(D,{checked:Y==="spain",onCheckedChange:n=>{n&&(g==null||g("spain"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.spain")}),e.jsx(D,{checked:Y==="portugal",onCheckedChange:n=>{n&&(g==null||g("portugal"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.portugal")}),e.jsx(D,{checked:Y==="india",onCheckedChange:n=>{n&&(g==null||g("india"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.india")}),e.jsx(D,{checked:Y==="brazil",onCheckedChange:n=>{n&&(g==null||g("brazil"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.brazil")}),e.jsx(D,{checked:Y==="australia",onCheckedChange:n=>{n&&(g==null||g("australia"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.australia")}),e.jsx(D,{checked:Y==="russia",onCheckedChange:n=>{n&&(g==null||g("russia"))},className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.russia")})]})]}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:ye,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.editFuture")})]})]}),e.jsxs(dt,{children:[e.jsx(ut,{className:"px-2 py-1 text-md focus-visible:ring-0",children:i("apps.internet-explorer.menu.favorites")}),e.jsxs(mt,{align:"start",sideOffset:1,className:"px-0 max-w-xs",children:[e.jsx(ne,{onClick:d,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.goHome")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:te,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.addToFavorites")}),f.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-[2px] bg-black my-1"}),f.map(n=>br(n,(ee,Me)=>F==null?void 0:F(ee,Me))),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:I,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.clearFavorites")})]}),e.jsx(ne,{onClick:ae,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.resetFavorites")})]})]}),e.jsxs(dt,{children:[e.jsx(ut,{className:"px-2 py-1 text-md focus-visible:ring-0",children:i("apps.internet-explorer.menu.history")}),e.jsxs(mt,{align:"start",sideOffset:1,className:"px-0 max-h-[400px] overflow-y-auto max-w-xs",children:[e.jsx(ne,{onClick:K,disabled:!E,className:E?"text-md h-6 px-3":"text-gray-400 text-md h-6 px-3",children:i("apps.internet-explorer.menu.back")}),e.jsx(ne,{onClick:Z,disabled:!T,className:T?"text-md h-6 px-3":"text-gray-400 text-md h-6 px-3",children:i("apps.internet-explorer.menu.forward")}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-[2px] bg-black my-1"}),j.slice(0,10).map(n=>e.jsxs(ne,{onClick:()=>U==null?void 0:U(n.url,n.year||"current"),className:"text-md h-6 px-3 flex items-center gap-2",children:[n.favicon&&typeof navigator<"u"&&"onLine"in navigator&&navigator.onLine?e.jsx("img",{src:n.favicon,alt:"",className:"w-4 h-4",onError:ee=>{ee.currentTarget.src="/icons/default/ie-site.png"}}):e.jsx(Ke,{name:"ie-site.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),e.jsxs("span",{className:"truncate",children:[n.title,n.year&&n.year!=="current"&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",n.year,")"]})]})]},n.url+n.timestamp)),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:q,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.clearHistory")})]})]})]}),e.jsxs(dt,{children:[e.jsx(ut,{className:"px-2 py-1 text-md focus-visible:ring-0",children:i("common.menu.help")}),e.jsxs(mt,{align:"start",sideOffset:1,className:"px-0",children:[e.jsx(ne,{onClick:$,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.internetExplorerHelp")}),e.jsx(ne,{onSelect:()=>B(!0),className:"text-md h-6 px-3",children:i("common.menu.shareApp")}),e.jsx(we,{className:"h-[2px] bg-black my-1"}),e.jsx(ne,{onClick:S,className:"text-md h-6 px-3",children:i("apps.internet-explorer.menu.aboutInternetExplorer")})]})]}),e.jsx(Kt,{isOpen:b,onClose:()=>B(!1),itemType:"App",itemIdentifier:J,title:(de=Xr[J])==null?void 0:de.name,generateShareUrl:Kr})]})}function Cs(o){const c=l.useRef(null),d=l.useRef(null);return l.useCallback($=>{d.current=$,c.current===null&&(c.current=requestAnimationFrame(()=>{c.current=null,o(d.current)}))},[o])}function Rs({onLoadingChange:o,customTimeline:c={}}={}){const[d,$]=l.useState(null),[S,v]=l.useState(!1),f=l.useRef(null),j=l.useRef(!1),te=l.useRef(null),I=l.useRef(null),{aiModel:ae}=Ne(),F=$e(A=>A.loadSuccess),U=$e(A=>A.loadError),p=$e(A=>A.timelineSettings),y=$e(A=>A.language),K=$e(A=>A.location),Z=A=>({auto:R.t("apps.internet-explorer.autodetected"),english:R.t("apps.internet-explorer.english"),chinese:R.t("apps.internet-explorer.chineseTraditional"),japanese:R.t("apps.internet-explorer.japanese"),korean:R.t("apps.internet-explorer.korean"),french:R.t("apps.internet-explorer.french"),spanish:R.t("apps.internet-explorer.spanish"),portuguese:R.t("apps.internet-explorer.portuguese"),german:R.t("apps.internet-explorer.german"),welsh:R.t("apps.internet-explorer.welsh"),sanskrit:R.t("apps.internet-explorer.sanskrit"),latin:R.t("apps.internet-explorer.latin"),alien:R.t("apps.internet-explorer.alienLanguage"),ai_language:R.t("apps.internet-explorer.aiLanguage"),digital_being:R.t("apps.internet-explorer.digitalBeingLanguage")})[A]||R.t("apps.internet-explorer.autodetected"),E=A=>({auto:R.t("apps.internet-explorer.autodetected"),united_states:R.t("apps.internet-explorer.unitedStates"),china:R.t("apps.internet-explorer.china"),japan:R.t("apps.internet-explorer.japan"),korea:R.t("apps.internet-explorer.southKorea"),france:R.t("apps.internet-explorer.france"),spain:R.t("apps.internet-explorer.spain"),portugal:R.t("apps.internet-explorer.portugal"),germany:R.t("apps.internet-explorer.germany"),canada:R.t("apps.internet-explorer.canada"),uk:R.t("apps.internet-explorer.unitedKingdom"),india:R.t("apps.internet-explorer.india"),brazil:R.t("apps.internet-explorer.brazil"),australia:R.t("apps.internet-explorer.australia"),russia:R.t("apps.internet-explorer.russia")})[A]||R.t("apps.internet-explorer.autodetected"),T=({message:A})=>{var re;if(!f.current||j.current)return;const b=(((re=A.parts)==null?void 0:re.filter(me=>me.type==="text").map(me=>me.text).join(""))||"").replace(/^\s*```(?:html)?\s*\n?|\n?\s*```\s*$/g,"").trim(),B=b.match(/^<!--\s*TITLE:\s*(.*?)\s*-->/),J=B?B[1].trim():null,L=b.replace(/^<!--\s*TITLE:.*?-->\s*\n?/,"");j.current=!0;const H=te.current,ce=I.current;if(H&&ce){let me=H;try{me=new URL(H.startsWith("http")?H:`https://${H}`).hostname}catch(n){console.warn("Error parsing URL for fallback title:",n)}const de=`https://www.google.com/s2/favicons?domain=${new URL(H.startsWith("http")?H:`https://${H}`).hostname}&sz=32`;F({aiGeneratedHtml:L,title:J||me,targetUrl:H,targetYear:ce,favicon:de,addToHistory:!0}),console.log("[IE] AI generation complete (onFinish)")}else console.error("[IE] Could not retrieve URL/Year from refs in onFinish handler."),F({aiGeneratedHtml:L})},{messages:q,sendMessage:oe,status:ye,setMessages:V,stop:Y}=bs({messages:[],onFinish:T,transport:new ws({api:Yr("/api/ie-generate"),body:{model:ae}})}),u=ye==="streaming"||ye==="submitted",g=async(A,i)=>{try{v(!0);const B=`https://r.jina.ai/http://${(A.startsWith("http")?A:`https://${A}`).replace(/^https?:\/\//,"")}`,J=await fetch(B,{signal:i});return J.ok?(await J.text()).slice(0,4e3):null}catch(b){return b instanceof Error&&b.name==="AbortError"?(console.log("Fetch operation was aborted"),null):(console.warn("Failed to fetch existing website content:",b),null)}finally{v(!1)}},Ce=async(A,i,b,B,J)=>{if(Gt("AI website generation requires an internet connection"))return;const L=`${A}-${i}-${Date.now()}`;f.current=L,j.current=!1;const H=A.startsWith("http")?A:`https://${A}`;if(te.current=H,I.current=i,$(null),V([]),b!=null&&b.aborted)return;let ce;try{ce=new URL(H).hostname}catch(M){console.error(`[IE] Error parsing URL for prompt: ${H}`,M),U("Invalid URL format. Please enter a valid website address.");return}let re=J;if(!re)try{re=await g(H,b)}catch(M){console.warn("[IE] Error fetching website content, continuing without it:",M)}if(b!=null&&b.aborted||f.current!==L)return;const de=(M=>c[M]?c[M]:p[M]?p[M]:Vt[M]||"2020s: Current era. AI assistants. Smart devices. Electric vehicles. Renewable energy. Space tourism. Digital transformation. Remote work. Virtual reality. Genetic medicine.")(i),n=M=>{switch(M){case"latin":return"The content should be primarily in Latin. Use classical Latin vocabulary and grammar structures typical of ancient Rome. Include appropriate Roman cultural references.";case"sanskrit":return"The content should be primarily in Sanskrit. Use Devanagari script when possible, or romanized Sanskrit. Include appropriate ancient Indian cultural references.";case"alien":return"The content should appear to be in an alien language. Create a believable alien writing system with internal consistency. Include some untranslated alien text alongside a partial 'translation'. The UI should have an alien aesthetic.";case"ai_language":return"The content should be in a language created by artificial intelligence. Mix natural language with code-like syntax, mathematical symbols, and structured data patterns. Include machine learning terminology and computational concepts.";case"digital_being":return"The content should be in a language used by digital entities. Use a combination of binary patterns, hexadecimal codes, and network protocol references. The language should feel like it was designed for machine-to-machine communication but adapted for human interface.";default:return`The content should be primarily in ${Z(M)}.`}},ee=y!=="auto"?`
- Primary Language: ${Z(y)}. ${n(y)}`:"",Me=K!=="auto"?`
- Location Context: ${E(K)}. The content should be culturally relevant to ${E(K)}.`:"",fe=`CONTEXT
Below are details about the current website and the task:

- Domain: ${ce}
- URL: ${H}${ee}${Me}
${J?`- The HTML content of the *previous* AI-generated page view for year ${i} is provided below. This is a navigation source - the user clicked a link in this page to navigate to the current URL:
'''
${J.slice(0,4e3)}
'''
`:re?`- A snapshot of the *live* website's readable content (fetched via Jina, truncated to 4,000 characters) is provided below:
'''
${re}
'''
`:"- No current website content available for context."}
${B?`- Known Title: ${B}
`:""}

It is the year ${i}. Here is the timeline of human civilization leading up to this point:

${Object.entries({...Vt,...p,...c}).filter(([M])=>parseInt(M)<=parseInt(i)).sort(([M],[ie])=>parseInt(M)-parseInt(ie)).map(([M,ie])=>`${M}: ${ie}`).join(`
`)}

${de}
${J?`

IMPORTANT NAVIGATION CONTEXT:
- The user was viewing a previously generated page and clicked a link to navigate to "${H}"
- Your task is to generate the destination page that would be shown after clicking this link
- Maintain visual consistency with the source page (similar design language, colors, UI elements)
- The new page should feel like part of the same website/experience as the source page
- Preserve any context or theme from the source page that would be relevant`:""}`;try{if(b!=null&&b.aborted||f.current!==L)return;await oe({text:fe},{body:{url:H,year:i,language:y,location:K}})}catch(M){if(M instanceof Error&&M.name==="AbortError"){console.log("AI generation was aborted");return}console.error("Failed to generate futuristic website:",M),U(`Failed to generate website preview for ${H} in ${i}. ${M instanceof Error?M.message:String(M)}`)}},Q=Cs($);return l.useEffect(()=>{var A;if(q.length>1){const i=q[q.length-1];if(i.role==="assistant"){const J=(((A=i.parts)==null?void 0:A.filter(L=>L.type==="text").map(L=>L.text).join(""))||"").replace(/^\s*```(?:html)?\s*\n?|\n?\s*```\s*$/g,"").trim().replace(/^<!--\s*TITLE:.*?-->\s*\n?/,"");Q(J)}}},[q]),l.useEffect(()=>{o==null||o(u)},[u,o]),{generateFuturisticWebsite:Ce,aiGeneratedHtml:d,isAiLoading:u,isFetchingWebsiteContent:S,stopGeneration:()=>{Y(),f.current=null}}}function As({className:o,...c}){return e.jsx("textarea",{"data-slot":"textarea",className:We("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),...c})}const Ds=({isOpen:o,onOpenChange:c})=>{const{t:d}=bt(),$=Jt(E=>E.current),S=$==="xp"||$==="win98",v=$==="macosx",[f,j]=l.useState("2030"),te=l.useRef(null),{timelineSettings:I,setTimelineSettings:ae,year:F}=$e();l.useEffect(()=>{o&&(F==="current"||parseInt(F)<=new Date().getFullYear()?j("2030"):j(F))},[o,F]);const U=[...Array.from({length:8},(E,T)=>(2030+T*10).toString()),"2150","2200","2250","2300","2400","2500","2750","3000"].sort((E,T)=>parseInt(T)-parseInt(E)),p=E=>Vt[E]||"2020s: Current era. AI assistants. Smart devices. Electric vehicles. Renewable energy. Space tourism. Digital transformation. Remote work. Virtual reality. Genetic medicine.",y=E=>{j(E)},K=()=>{const E={...I};delete E[f],ae(E)},Z=e.jsx("div",{className:S?"p-2 px-4":"p-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:We("text-gray-900",S?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:S?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:S?"11px":void 0},children:[d("apps.internet-explorer.year"),":"]}),e.jsxs(lr,{value:f,onValueChange:y,children:[e.jsx(or,{className:"w-[180px]",children:e.jsx(cr,{placeholder:d("apps.internet-explorer.futureTimeline.selectYear")})}),e.jsx(pr,{children:U.map(E=>e.jsx(Dt,{value:E,children:E},E))})]})]}),e.jsx(As,{value:I[f]||p(f),onChange:E=>{const T={...I,[f]:E.target.value};ae(T)},placeholder:p(f),className:We("min-h-[200px]",S?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:S?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:S?"11px":void 0}}),e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(Ie,{variant:"retro",onClick:K,className:We("h-7",S?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:S?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:S?"11px":void 0},children:d("apps.internet-explorer.futureTimeline.reset")}),e.jsx(Ie,{variant:v?"default":"retro",onClick:()=>c(!1),ref:te,className:We(!v&&"h-7",S?"font-['Pixelated_MS_Sans_Serif',Arial] text-[11px]":"font-geneva-12 text-[12px]"),style:{fontFamily:S?'"Pixelated MS Sans Serif", "ArkPixel", Arial':void 0,fontSize:S?"11px":void 0},children:d("common.dialog.close")})]})]})});return e.jsx(Qr,{open:o,onOpenChange:c,children:e.jsx(Zr,{className:We("bg-os-window-bg border-[length:var(--os-metrics-border-width)] border-os-window rounded-os shadow-os-window",S&&"p-0 overflow-hidden"),style:S?{fontSize:"11px"}:void 0,onOpenAutoFocus:E=>{var T;E.preventDefault(),(T=te.current)==null||T.focus()},children:S?e.jsxs(e.Fragment,{children:[e.jsx(_t,{children:d("apps.internet-explorer.futureTimeline.title")}),e.jsx("div",{className:"window-body",children:Z})]}):v?e.jsxs(e.Fragment,{children:[e.jsx(_t,{children:d("apps.internet-explorer.futureTimeline.title")}),Z]}):e.jsxs(e.Fragment,{children:[e.jsxs(_t,{children:[e.jsx(Lr,{className:"font-normal text-[16px]",children:d("apps.internet-explorer.futureTimeline.title")}),e.jsx(es,{className:"sr-only",children:d("apps.internet-explorer.futureTimeline.description")})]}),Z]})})})},nr=({onOlder:o,onNewer:c,onNow:d,isOlderDisabled:$,isNewerDisabled:S,isNowDisabled:v,olderLabel:f,newerLabel:j,nowLabel:te="Now",layout:I,playClickSound:ae})=>{const{t:F}=bt(),U=I==="vertical"?rs:ss,p=I==="vertical"?ts:ys,y=()=>{ae(),o()},K=()=>{ae(),c()},Z=()=>{ae(),d()},E="text-white/60 hover:text-white hover:bg-white/10 rounded p-1.5 h-8 w-8 flex items-center justify-center disabled:opacity-30 transition-colors",T="text-white/60 hover:text-white hover:bg-neutral-600/70 rounded p-1.5 h-8 w-8 flex items-center justify-center disabled:opacity-30 transition-colors";return e.jsx(dr,{delayDuration:100,children:e.jsxs("div",{className:We("flex items-center justify-center gap-4",I==="vertical"?"flex-col":"flex-row"),children:[e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx("button",{onClick:I==="vertical"?y:K,className:I==="vertical"?E:T,disabled:I==="vertical"?$:S,"aria-label":F(I==="vertical"?"apps.internet-explorer.olderVersion":"apps.internet-explorer.newerVersion"),children:e.jsx(p,{size:18})})}),e.jsx(gt,{side:I==="vertical"?"right":"bottom",children:e.jsx("p",{children:I==="vertical"?f:j})})]}),e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx("button",{onClick:Z,className:I==="vertical"?E:T,disabled:v,"aria-label":F("apps.internet-explorer.goToNow"),children:e.jsx(Es,{size:24})})}),e.jsx(gt,{side:I==="vertical"?"right":"bottom",children:e.jsx("p",{children:te})})]}),e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx("button",{onClick:I==="vertical"?K:y,className:I==="vertical"?E:T,disabled:I==="vertical"?S:$,"aria-label":F(I==="vertical"?"apps.internet-explorer.newerVersion":"apps.internet-explorer.olderVersion"),children:e.jsx(U,{size:18})})}),e.jsx(gt,{side:I==="vertical"?"right":"bottom",children:e.jsx("p",{children:I==="vertical"?j:f})})]})]})})},Ms=({isOpen:o,onClose:c,cachedYears:d,currentUrl:$,onSelectYear:S,currentSelectedYear:v})=>{const{t:f}=bt(),[j,te]=l.useState(0),[I,ae]=l.useState({isTop:!0,isBottom:!1,canScroll:!1}),[F,U]=l.useState("none"),[p,y]=l.useState(null),[K,Z]=l.useState(null),[E,T]=l.useState(null),[q,oe]=l.useState("idle"),[ye,V]=l.useState(null),[Y,u]=l.useState(!1),g=l.useRef(null),Ce=l.useRef(null),Q=$e(a=>a.url),A=$e(a=>a.year),i=Ne(a=>a.shaderEffectEnabled),b=Ne(a=>a.setShaderEffectEnabled),B=d[j]??null,{play:J}=Ht(Wt.WINDOW_OPEN,.5),{play:L}=Ht(Wt.WINDOW_CLOSE,.5),{play:H}=Ht(Wt.BUTTON_CLICK,.4),[ce,re]=l.useState(!1),me=!B||Q===$&&A===B,de=Ne(a=>a.selectedShaderType),n=Ne(a=>a.setSelectedShaderType),ee={[Tt.GALAXY]:f("apps.internet-explorer.galaxy"),[Tt.AURORA]:f("apps.internet-explorer.aurora"),[Tt.NEBULA]:f("apps.internet-explorer.nebula"),off:f("apps.internet-explorer.off")},Me=a=>{const k=window.innerWidth<640;return a?k?"linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%)":"linear-gradient(to bottom, transparent 0%, black 5%, black 95%, transparent 100%)":"none"},fe=l.useCallback(()=>{const a=g.current;if(!a)return;const k=window.innerWidth<640;let P=!1;if(k){const w=a.scrollWidth,pe=a.clientWidth;P=w>pe+1}else{const w=a.scrollHeight,pe=a.clientHeight;P=w>pe+5}ae(w=>w.canScroll!==P?{isTop:!1,isBottom:!1,canScroll:P}:w)},[]);l.useEffect(()=>{const a=g.current;if(o&&a){const k=setTimeout(()=>{fe(),a.addEventListener("scroll",fe,{passive:!0}),window.addEventListener("resize",fe)},100);return()=>{clearTimeout(k),a.removeEventListener("scroll",fe),window.removeEventListener("resize",fe)}}},[o,fe,d]),l.useEffect(()=>{if(o){J();const a=d.findIndex(P=>P===v),k=a!==-1?a:0;te(k),d[k]?y(d[k]):y(null),oe("idle"),Z(null),T(null),V(null),u(!1)}else y(null),Z(null),T(null),oe("idle"),V(null),u(!1)},[d,o,v]),l.useEffect(()=>{if(o&&q!=="idle"){const a=d[j];a&&a!==p&&y(a)}},[j,o,d]),l.useEffect(()=>{if(o&&g.current&&d.length>0&&j>=0&&j<g.current.children.length){const a=g.current.children[j];a&&(window.innerWidth<640?a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}):a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}},[j,o,d.length]);const M=l.useCallback(()=>{L(),c()},[c,L]),ie=l.useCallback(a=>{te(k=>{let P;return typeof a=="function"?P=a(k):P=a,P=Math.max(0,Math.min(d.length-1,P)),P>k?U("forward"):P<k?U("backward"):U("none"),P})},[d.length]),Re=l.useCallback(a=>{o&&(a.key==="ArrowUp"?(a.preventDefault(),ie(k=>k+1)):a.key==="ArrowDown"?(a.preventDefault(),ie(k=>k-1)):a.key==="Enter"?(a.preventDefault(),d[j]&&S(d[j])):a.key==="Escape"&&(a.preventDefault(),c()))},[o,d,j,S,M,ie]);l.useEffect(()=>(o?window.addEventListener("keydown",Re):window.removeEventListener("keydown",Re),()=>{window.removeEventListener("keydown",Re)}),[o,Re]);const ve=l.useRef(0),Fe=l.useRef(null);l.useEffect(()=>{if(!o||!p||!$){Z(null),T(null),oe("idle"),V(null),u(!1);return}Fe.current&&Fe.current.abort();const a=new AbortController;Fe.current=a;const k=++ve.current;return console.log(`[TimeMachine] Determining content source for year: ${p}`),oe("loading"),Z(null),T(null),V(null),u(!1),(async()=>{try{if(console.log(`[TimeMachine] Determining API source for ${$} (${p})...`),p==="current"){console.log("[TimeMachine] Source: current -> URL");const w=`/api/iframe-check?url=${encodeURIComponent($)}&theme=${encodeURIComponent(document.documentElement.dataset.osTheme||"")}`;if(a.signal.aborted||ve.current!==k)return;Z(w),T("url"),oe("success")}else{const w=p.replace(" BC",""),pe=parseInt(w),se=new Date().getFullYear();if(!p.includes(" BC")&&pe>=1996&&pe<=se){console.log(`[TimeMachine] Source: ${p} >= 1996 -> URL (Wayback Proxy)`);const ge=(new Date().getMonth()+1).toString().padStart(2,"0"),he=`/api/iframe-check?mode=proxy&url=${encodeURIComponent($)}&year=${w}&month=${ge}&theme=${encodeURIComponent(document.documentElement.dataset.osTheme||"")}`;if(a.signal.aborted||ve.current!==k)return;Z(he),T("url"),oe("success")}else{console.log(`[TimeMachine] Source: ${p} < 1996 or BC -> HTML (AI Fetch)`);const ge=await fetch(`/api/iframe-check?mode=ai&url=${encodeURIComponent($)}&year=${p}&theme=${encodeURIComponent(document.documentElement.dataset.osTheme||"")}`,{signal:a.signal});if(a.signal.aborted||ve.current!==k)return;if(ge.ok){console.log(`[TimeMachine] AI Fetch SUCCESS for ${$} (${p})`);const xe=(await ge.text()).replace(/^<!--\s*TITLE:.*?-->\s*\n?/,"");if(a.signal.aborted||ve.current!==k)return;Z(xe),T("html"),oe("success"),u(!0)}else{if(ge.status===404)throw console.log(`[TimeMachine] AI Fetch MISS (404) for ${$} (${p}).`),new Error(`No AI-generated version available for ${p}.`);{console.error(`[TimeMachine] AI Fetch FAILED for ${$} (${p}). Status: ${ge.status}`);const he=await ge.text();let xe=`API Error (${ge.status})`;try{const it=JSON.parse(he);it.message&&(xe=it.message)}catch{}throw new Error(xe)}}}}}catch(w){if(a.signal.aborted||ve.current!==k)return;console.error("[TimeMachine] Error determining preview content:",w),V(w instanceof Error?w.message:"Failed to load preview."),oe("error"),Z(null),T(null),u(!1)}})(),()=>{a.abort()}},[p,o,$]);const wt=a=>{try{return new URL(a.startsWith("http")?a:`https://${a}`).hostname}catch{return a}},Be=4,Pe=-80,Xe=.05,Ye=-28,Ae=Me(I.canScroll),Qe={exit:a=>a==="backward"?{opacity:0,z:Pe,scale:1-Xe,y:Ye,transition:{type:"spring",stiffness:150,damping:25}}:{opacity:0,z:50,scale:1.05,y:28,transition:{type:"spring",stiffness:150,damping:25}}},nt=j<d.length-1?d[j+1]:f("apps.internet-explorer.oldest"),Ue=j>0?d[j-1]:f("apps.internet-explorer.newest"),at=Math.max(0,j),Ge=Math.min(d.length,j+Be+1),Ze=d.slice(at,Ge),yt={hidden:{height:0,opacity:0,transition:{duration:.3}},visible:{height:"0.25rem",opacity:1,transition:{duration:.3}}},vt={loading:{opacity:[.4,.7,.4],transition:{duration:2.5,ease:"easeInOut",repeat:1/0}},loaded:{opacity:1,transition:{duration:.5}}},Mt=l.useCallback(()=>{B&&re(!0)},[B]),je=(a,k)=>{const w=((pe,se)=>{const ze=`${pe}|${se}`;return btoa(ze).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})(a,k||"current");return`${window.location.origin}/internet-explorer/${w}`};return e.jsx(e.Fragment,{children:typeof document<"u"?qr.createPortal(e.jsx(st,{children:o&&e.jsxs(ke.div,{className:`fixed inset-0 z-[10000] ${i?"bg-black/90":"bg-black/70 backdrop-blur-xl"} flex flex-col items-center font-geneva-12 min-h-[100dvh] max-h-[100dvh]`,initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.3,ease:"easeInOut"},children:[e.jsx(ns,{shaderType:de}),e.jsx("button",{onClick:M,className:"absolute top-4 right-4 text-neutral-400 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10 z-20","aria-label":f("apps.internet-explorer.closeTimeMachine"),children:e.jsx(vs,{size:24})}),e.jsxs(ke.div,{className:`relative w-full flex-grow overflow-auto flex flex-col items-center justify-start perspective-[1000px] px-2 gap-2 pt-16 overflow-hidden
                           sm:flex-row sm:items-center sm:pt-0 sm:pb-0 sm:px-4 sm:gap-4 sm:pr-0`,initial:{opacity:0,scale:1.04},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.04},transition:{duration:.4,delay:.1,ease:"easeInOut"},children:[e.jsx("div",{className:"w-20 flex-shrink-0 hidden sm:block"}),e.jsx("div",{ref:Ce,className:`relative w-full flex-grow flex items-center justify-center preserve-3d order-1
                                                        sm:order-none sm:h-[80%]`,children:e.jsx(st,{initial:!1,custom:F,children:Ze.map((a,k)=>{const P=at+k,w=P-j,pe=1/(w+1),se=d.length-P;return e.jsx(ke.div,{className:"absolute w-[100%] h-full rounded-[12px] border border-white/10 shadow-2xl overflow-hidden preserve-3d bg-neutral-800/50",initial:(()=>{const ze={z:w*Pe,scale:1-w*Xe,y:w*Ye,opacity:0};return w===0&&F==="forward"?{z:50,scale:1.05,y:28,opacity:0}:ze})(),animate:{z:w*Pe,y:w*Ye,scale:1-w*Xe,opacity:pe,pointerEvents:w===0?"auto":"none",backgroundColor:w===0?"rgba(38, 38, 38, 0.7)":"rgba(20, 20, 20, 0.5)"},variants:Qe,exit:"exit",transition:{type:"spring",stiffness:150,damping:25},style:{zIndex:se,transformOrigin:"center center",rotateX:w!==0?-5:0},children:e.jsxs("div",{className:"w-full h-full",children:[w===0&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(st,{mode:"wait",children:e.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"w-full h-full",children:[q==="loading"&&e.jsx(ke.div,{className:"w-full h-full flex items-center justify-center bg-transparent",variants:vt,animate:"loading",children:e.jsx("p",{className:"text-neutral-400 shimmer",children:f("apps.internet-explorer.loadingEllipsis")})}),q==="error"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:e.jsx("p",{className:"text-red-400 text-center",children:ye||f("apps.internet-explorer.errorLoadingPreview")})}),q==="success"&&K&&e.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.1},className:"w-full h-full overflow-hidden",children:[E==="url"&&e.jsxs(ke.div,{initial:{opacity:0},variants:vt,animate:Y?"loaded":"loading",className:"w-full h-full relative",children:[e.jsx(st,{children:!Y&&e.jsx(ke.div,{className:"absolute top-0 left-0 right-0 bg-white/75 backdrop-blur-sm overflow-hidden z-50",variants:yt,initial:"hidden",animate:"visible",exit:"hidden"})}),e.jsx("iframe",{src:K,className:"w-full h-full border-none bg-white",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-pointer-lock",title:`Preview for ${p}`,onLoad:()=>{console.log(`[TimeMachine] iframe for ${p} loaded.`),u(!0)},onError:()=>{console.warn(`[TimeMachine] iframe for ${p} failed to load.`),V(f("apps.internet-explorer.unableToLoadPreview")),oe("error"),u(!1)}})]}),E==="html"&&e.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full h-full",children:e.jsx(fr,{htmlContent:K,isInternetExplorer:!0,maxHeight:"100%",minHeight:"100%",className:"border-none rounded-none"})})]}),(q==="idle"||q==="success"&&!K)&&e.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[" "," "]})]},q)})}),w!==0&&e.jsx("div",{className:"w-full h-full bg-neutral-900/30"})]})},a)})})}),e.jsx("div",{className:"hidden h-full flex-col items-center justify-center w-auto flex-shrink-0 z-10 py-8 gap-2 sm:flex",children:e.jsx(nr,{layout:"vertical",onOlder:()=>ie(a=>a+1),onNewer:()=>ie(a=>a-1),onNow:()=>{const a=d.findIndex(k=>k==="current");a!==-1&&ie(a)},isOlderDisabled:j===d.length-1,isNewerDisabled:j===0,isNowDisabled:d[j]==="current",olderLabel:nt,newerLabel:Ue,nowLabel:f("apps.internet-explorer.now"),playClickSound:H})}),e.jsxs("div",{className:`w-full flex flex-col justify-center order-2 px-2 z-10 flex-shrink-0 gap-0
                           sm:h-[80dvh] sm:flex-col sm:items-center sm:justify-center sm:w-48 sm:flex-shrink-0 sm:order-none sm:gap-2`,children:[e.jsx("div",{className:`relative w-full flex-grow flex flex-row items-center justify-center overflow-hidden px-2
                                   sm:flex-col sm:px-4 sm:py-2 sm:h-auto sm:max-h-full`,children:e.jsx("div",{ref:g,className:`w-auto max-w-full overflow-x-auto flex flex-row items-center space-x-4 space-y-0 justify-start py-2 flex-shrink-0
                                      sm:w-full sm:overflow-y-auto sm:flex-col-reverse sm:hover:flex-col-reverse sm:items-center sm:space-y-1 sm:space-x-0 sm:py-4 sm:h-auto sm:max-h-full sm:max-w-none
                                      sm:justify-start sm:min-h-full
                                      [&::-webkit-scrollbar]:hidden
                                      [&::-webkit-scrollbar]:sm:w-1
                                      [&::-webkit-scrollbar]:sm:hover:block
                                      [&::-webkit-scrollbar]:sm:translate-x-1
                                      [&::-webkit-scrollbar-thumb]:rounded-full
                                      [&::-webkit-scrollbar-thumb]:bg-white/20
                                      [&::-webkit-scrollbar-track]:bg-transparent
                                      sm:pr-2`,style:{maskImage:Ae,WebkitMaskImage:Ae},children:d.map((a,k)=>{const P=j===k,w=a==="current",pe="rounded-sm transition-all duration-200 ease-out",se=P?"h-1.5 w-12 sm:w-14 sm:h-1":"h-1 w-8 group-hover:w-10 sm:w-8 sm:h-0.5 ",ze=P?w?"bg-red-500":"bg-white":"bg-white/30 group-hover:bg-white";return e.jsxs("div",{className:`w-auto flex flex-col items-center justify-center h-full py-1 cursor-pointer group
                                                   sm:w-full sm:flex-row sm:items-center sm:justify-end sm:h-6 sm:py-0 sm:my-0.5`,onClick:()=>{H(),k>j?U("forward"):k<j?U("backward"):U("none"),te(k)},children:[e.jsx("span",{className:`text-xs font-medium transition-colors duration-150 mb-1 whitespace-nowrap sm:mr-2 sm:mb-0 sm:transition-opacity ${P?w?"text-red-400":"text-white":"text-neutral-500 group-hover:text-neutral-300 sm:text-neutral-400"} ${P||w?"sm:opacity-100":"sm:opacity-0 sm:group-hover:opacity-100"}`,children:w?f("apps.internet-explorer.now"):a}),e.jsx("div",{className:`${pe} ${se} ${ze} hidden sm:block`})]},a)})})}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 pt-2 pb-4 sm:!hidden",children:e.jsx(nr,{layout:"horizontal",onOlder:()=>ie(a=>a+1),onNewer:()=>ie(a=>a-1),onNow:()=>{const a=d.findIndex(k=>k==="current");a!==-1&&ie(a)},isOlderDisabled:j===d.length-1,isNewerDisabled:j===0,isNowDisabled:d[j]==="current",olderLabel:f("apps.internet-explorer.older"),newerLabel:f("apps.internet-explorer.newer"),nowLabel:f("apps.internet-explorer.now"),playClickSound:H})})]})]}),e.jsxs("div",{className:`relative w-full flex-shrink-0 ${i?"bg-neutral-900/80":"bg-neutral-900/60 backdrop-blur-sm"} border-t border-white/10 flex items-center justify-between px-4 z-20 pt-2 pb-[calc(0.5rem+env(safe-area-inset-bottom))]
                           sm:h-10 sm:pt-0 sm:pb-0`,children:[e.jsx("div",{className:"w-8 flex items-center justify-start",children:e.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-white/10 opacity-60 hover:opacity-100 transition-opacity",onClick:Mt,"aria-label":f("apps.internet-explorer.shareThisPageAndTime"),children:e.jsx(gr,{size:16,className:"text-neutral-300"})})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 flex-grow",children:[e.jsxs("p",{className:"text-sm text-neutral-300 truncate text-center",children:[wt($),B!=="current"&&e.jsxs("span",{className:"text-neutral-400 ml-1",children:[f("apps.internet-explorer.in")," ",B]})]}),e.jsx(Ie,{size:"sm",variant:"secondary",className:"rounded-full px-2 py-0.5 h-6",disabled:me,onClick:()=>{B&&(H(),S(B),M())},children:f("apps.internet-explorer.travel")})]}),e.jsx("div",{className:"w-8 flex items-center justify-end",children:e.jsxs(ur,{children:[e.jsx(mr,{asChild:!0,children:e.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-white/10 opacity-60 hover:opacity-100 transition-opacity",children:e.jsx(Ns,{size:16,className:"text-neutral-300"})})}),e.jsx(hr,{align:"end",className:"z-[10001]",children:[...Object.values(Tt),"off"].map(a=>{const k=a==="off"?!i:i&&de===a;return e.jsxs(xr,{className:We("font-geneva-12 text-[12px] flex items-center justify-between",k&&"bg-accent text-accent-foreground"),onClick:()=>{a==="off"?b(!1):(b(!0),n(a)),H()},children:[ee[a],k&&e.jsx("span",{className:"ml-2",children:"âœ“"})]},a)})})]})})]}),e.jsx(Kt,{isOpen:ce,onClose:()=>re(!1),itemType:"Page",itemIdentifier:$,secondaryIdentifier:B||v,title:wt($),generateShareUrl:je,contentClassName:"z-[10001]",overlayClassName:"z-[10001]"})]})}),document.body):null})},Fs=o=>{const{t:c}=R;return{auto:c("apps.internet-explorer.autodetected"),english:c("apps.internet-explorer.english"),chinese:c("apps.internet-explorer.chineseTraditional"),japanese:c("apps.internet-explorer.japanese"),korean:c("apps.internet-explorer.korean"),french:c("apps.internet-explorer.french"),spanish:c("apps.internet-explorer.spanish"),portuguese:c("apps.internet-explorer.portuguese"),german:c("apps.internet-explorer.german"),welsh:c("apps.internet-explorer.welsh"),sanskrit:c("apps.internet-explorer.sanskrit"),latin:c("apps.internet-explorer.latin"),alien:c("apps.internet-explorer.alienLanguage"),ai_language:c("apps.internet-explorer.aiLanguage"),digital_being:c("apps.internet-explorer.digitalBeingLanguage")}[o]||c("apps.internet-explorer.autodetected")},Us=o=>{const{t:c}=R;return{auto:c("apps.internet-explorer.autodetected"),united_states:c("apps.internet-explorer.unitedStates"),china:c("apps.internet-explorer.china"),japan:c("apps.internet-explorer.japan"),korea:c("apps.internet-explorer.southKorea"),france:c("apps.internet-explorer.france"),spain:c("apps.internet-explorer.spain"),portugal:c("apps.internet-explorer.portugal"),germany:c("apps.internet-explorer.germany"),canada:c("apps.internet-explorer.canada"),uk:c("apps.internet-explorer.unitedKingdom"),india:c("apps.internet-explorer.india"),brazil:c("apps.internet-explorer.brazil"),australia:c("apps.internet-explorer.australia"),russia:c("apps.internet-explorer.russia")}[o]||c("apps.internet-explorer.autodetected")};function zs({title:o,primaryMessage:c,secondaryMessage:d,suggestions:$,details:S,footerText:v,showGoBackButtonInSuggestions:f=!0,onGoBack:j,onRetry:te}){return e.jsxs("div",{className:"p-6 font-geneva-12 text-sm h-full overflow-y-auto",children:[e.jsx("h1",{className:"text-lg mb-4 font-normal flex items-center",children:o}),e.jsx("p",{className:"mb-3",children:c}),d&&e.jsx("p",{className:"mb-3",children:d}),e.jsx("div",{className:"h-px bg-gray-300 my-5"}),e.jsx("p",{className:"mb-3",children:"Please try the following:"}),e.jsx("ul",{className:"list-disc pl-6 mb-5 space-y-2",children:$.map((I,ae)=>e.jsx("li",{children:typeof I=="string"&&I.includes("{hostname}")?I.split("{hostname}").map((F,U)=>U===0?F:e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`https://${S}`,target:"_blank",rel:"noopener noreferrer",className:"text-red-600 underline",children:S}),F]})):typeof I=="string"&&I.includes("{backButton}")&&f?I.split("{backButton}").map((F,U)=>U===0?F:e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",role:"button",onClick:p=>{p.preventDefault(),j()},className:"text-red-600 underline",children:"Back"}),F]})):typeof I=="string"&&I.includes("{refreshButton}")&&te?I.split("{refreshButton}").map((F,U)=>U===0?F:e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",role:"button",onClick:p=>{p.preventDefault(),te()},className:"text-red-600 underline",children:"Refresh"}),F]})):I},ae))}),S&&!v.includes("HTTP")&&e.jsx("div",{className:"p-3 bg-gray-100 border border-gray-300 rounded mb-5",children:S}),e.jsx("div",{className:"mt-10 text-gray-700 whitespace-pre-wrap",children:v})]})}const ar=50,Os=o=>{console.log(`[IE] Direct passthrough mode for: ${o}`)},$t=o=>{try{const c=o.startsWith("http")?o:`https://${o}`;return new URL(c).hostname}catch{return o}},ht=o=>o?o.length>ar?o.substring(0,ar)+"...":o:"Internet Explorer";function Pt(o){try{const c=o.replace(/-/g,"+").replace(/_/g,"/"),d=c+"=".repeat((4-c.length%4)%4),$=atob(d),[S,v]=$.split("|");if(typeof S=="string"&&typeof v=="string")return{url:S,year:v};try{const f=JSON.parse($);if(typeof f.url=="string"&&typeof f.year=="string")return{url:f.url,year:f.year}}catch{console.debug("[IE] Failed to parse as JSON, not a valid share code format")}return console.error("[IE] Decoded data structure invalid:",{url:S,year:v}),null}catch(c){return console.error("[IE] Error decoding share code:",c),null}}const ir=o=>{let c=o.replace(/^https?:\/\//,"");return c=c.replace(/\/$/,""),c};function nn({isWindowOpen:o,onClose:c,isForeground:d,skipInitialSound:$,helpItems:S,initialData:v,instanceId:f,onNavigateNext:j,onNavigatePrevious:te}){const I=as("internet-explorer",S||[]),ae=Ne(t=>t.debugMode),F=Ne(t=>t.terminalSoundsEnabled),U=Ne(t=>t.bringToForeground),{url:p,year:y,mode:K,token:Z,favorites:E,history:T,historyIndex:q,isTitleDialogOpen:oe,newFavoriteTitle:ye,isHelpDialogOpen:V,isAboutDialogOpen:Y,isNavigatingHistory:u,isClearFavoritesDialogOpen:g,isClearHistoryDialogOpen:Ce,currentPageTitle:Q,timelineSettings:A,status:i,finalUrl:b,aiGeneratedHtml:B,errorDetails:J,isResetFavoritesDialogOpen:L,isFutureSettingsDialogOpen:H,language:ce,location:re,isTimeMachineViewOpen:me,setUrl:de,setYear:n,navigateStart:ee,setFinalUrl:Me,loadSuccess:fe,loadError:M,cancel:ie,addFavorite:Re,clearFavorites:ve,setHistoryIndex:Fe,clearHistory:wt,setTitleDialogOpen:Be,setNewFavoriteTitle:Pe,setHelpDialogOpen:Xe,setAboutDialogOpen:Ye,setNavigatingHistory:Ae,setClearFavoritesDialogOpen:Qe,setClearHistoryDialogOpen:nt,handleNavigationError:Ue,setPrefetchedTitle:at,clearErrorDetails:Ge,setResetFavoritesDialogOpen:Ze,setFutureSettingsDialogOpen:yt,setLanguage:vt,setLocation:Mt,cachedYears:je,isFetchingCachedYears:a,setTimeMachineViewOpen:k,fetchCachedYears:P}=$e(),{t:w}=bt(),pe=l.useCallback(t=>{const r=t.includes("/")||t.includes(".")?$t(t):t,s=ht(r);return s==="Internet Explorer"?w("apps.internet-explorer.loadingTitle"):w("apps.internet-explorer.loadingTitleWithSite",{site:s})},[w]),se=l.useRef(null),[ze]=l.useState(!1),[ge,he]=l.useState(!1),[xe,it]=l.useState([]),[Oe,jt]=l.useState(""),[wr,Ft]=l.useState(!1),[kt,Ve]=l.useState(0),[Nt,Ut]=l.useState({});l.useEffect(()=>{const t=()=>{if(ge&&Ee.current)if(window.innerWidth<640){const s=Ee.current.getBoundingClientRect();Ut({position:"fixed",top:`${s.bottom}px`,left:"1rem",right:"1rem",zIndex:50})}else Object.keys(Nt).length>0&&Ut({});else Object.keys(Nt).length>0&&Ut({})};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[ge,Nt]);const Xt=t=>{if(!t)return"";let r=t.trim().toLowerCase();return r=r.replace(/^(https?:\/\/|ftp:\/\/)/i,""),r=r.replace(/\/$/g,""),r=r.replace(/^www\./i,""),r},qe=t=>t?t.replace(/^(https?:\/\/|ftp:\/\/)/i,""):"",It=l.useCallback(t=>{if(!t||!t.trim())return!1;const r=qe(t.trim());return r.startsWith("bing:")?!1:/^([a-z0-9]([a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]([a-z0-9-]*[a-z0-9])?/i.test(r)||/^localhost(:[0-9]+)?$/i.test(r)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]+)?$/i.test(r)},[qe]),Ee=l.useRef(null),G=l.useRef(null),Yt=l.useRef(null),{generateFuturisticWebsite:Et,aiGeneratedHtml:lt,isAiLoading:le,isFetchingWebsiteContent:De,stopGeneration:St}=Rs({onLoadingChange:()=>{},customTimeline:A}),{playElevatorMusic:zt,stopElevatorMusic:Se,playDingSound:yr}=gs(),ue=Jt(t=>t.current),Qt=new Date().getFullYear(),vr=["1000 BC","1 CE","500","800","1000","1200","1400","1600","1700","1800","1900","1910","1920","1930","1940","1950","1960","1970","1980","1985","1990",...Array.from({length:Qt-1991+1},(t,r)=>(1991+r).toString()).filter(t=>parseInt(t)!==Qt)].reverse(),Zt=["2150","2200","2250","2300","2400","2500","2750","3000"].sort((t,r)=>parseInt(r)-parseInt(t)),jr=Zt.includes(y),kr=i==="loading"||le||De,Nr={hidden:{height:0},visible:{height:4}},Ir=l.useCallback((t,r)=>{const s=`${t}|${r||"current"}`,m=btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return`${window.location.origin}/internet-explorer/${m}`},[]),Er=()=>{if(!J)return null;const t=J.type==="network"?"Cannot find server or DNS Error":"Error",r=J.message||"An error occurred",s=J.details,m=["Check the web address you typed and try again.","Go back to the previous page.","Try refreshing the page."],x=J.hostname?`Host: ${J.hostname}`:"";return e.jsx(zs,{title:t,primaryMessage:r,secondaryMessage:s,suggestions:m,details:J.details,footerText:x,onGoBack:ct,onRetry:()=>W(p,y)})},[Sr,Tr]=l.useState("Internet Explorer"),[$r,Lt]=l.useState(!1),Le=Ne(t=>t.clearInitialData),et=Ne(t=>t.clearInstanceInitialData);l.useEffect(()=>{let t="Internet Explorer";const r=Q||p;if(i==="loading"&&y!=="current"){const m=r.includes("/")||r.includes(".")?$t(r):r,x=ht(m);t=x==="Internet Explorer"?w("apps.internet-explorer.travellingTitle"):w("apps.internet-explorer.travellingTitleWithSite",{site:x})}else if(i==="loading")t=pe(r);else if(Q)t=ht(Q);else if(b)try{const m=b.startsWith("http")||b.startsWith("/")?b:`https://${b}`,x=m.startsWith("/api/iframe-check")?p:m,z=new URL(x.startsWith("http")?x:`https://${x}`).hostname;t=ht(z)}catch{try{const m=$t(p);t=ht(m)}catch{console.debug("[IE] Failed to parse both finalUrl and url for title:",b,p),t="Internet Explorer"}}Tr(t)},[i,Q,b,p,y,w,pe]);const Cr=async(t,r)=>{const m=String(new Date().getMonth()+1).padStart(2,"0"),x=t.startsWith("http")?t:`https://${t}`;console.log(`[IE] Using Wayback Machine URL for ${x} in ${r}`);const z=typeof ue=="string"?`&theme=${encodeURIComponent(ue)}`:"";return`/api/iframe-check?url=${encodeURIComponent(x)}&year=${r}&month=${m}${z}`},ot=l.useRef(0),Rr=async()=>{var t,r;if(G.current&&G.current.dataset.navToken===ot.current.toString()){const s=G.current.src;if(s.includes("/api/iframe-check")&&G.current.contentDocument)try{const m=(r=(t=G.current.contentDocument.body)==null?void 0:t.textContent)==null?void 0:r.trim();if(m&&(m.startsWith("{")||m.startsWith("[")))try{const X=JSON.parse(m);if(X&&X.error===!0&&X.type){console.log("[IE] Detected JSON error response in iframe body:",X),tt(rt.NAVIGATION_ERROR,{url:s,type:X.type,status:X.status||500,message:X.message}),Ue(X,p);return}}catch{}if(G.current.contentDocument.contentType==="application/json"){const z=G.current.contentDocument.body.textContent;if(z){const X=JSON.parse(z);if(X.error){console.log("[IE] Detected error response (via content-type check):",X),tt(rt.NAVIGATION_ERROR,{url:s,type:X.type,status:X.status||500}),Ue(X,p);return}}}}catch(m){console.warn("[IE] Error processing iframe content:",m)}Ge(),setTimeout(()=>{var m,x,z,X,be;if(G.current&&G.current.dataset.navToken===ot.current.toString()){let O=null;const C=p,h=C?new URL(C.startsWith("http")?C:`https://${C}`).hostname:"Internet Explorer";try{if(O=((x=(m=G.current)==null?void 0:m.contentDocument)==null?void 0:x.title)||null,O){const _=document.createElement("textarea");_.innerHTML=O,O=_.value.trim()}}catch(_){console.warn("[IE] Failed to read iframe document title directly:",_)}if(!O&&(b!=null&&b.startsWith("/api/iframe-check")))try{const _=(be=(X=(z=G.current)==null?void 0:z.contentDocument)==null?void 0:X.querySelector('meta[name="page-title"]'))==null?void 0:be.getAttribute("content");_&&(O=decodeURIComponent(_))}catch(_){console.warn("[IE] Failed to read page-title meta tag:",_)}const N=`https://www.google.com/s2/favicons?domain=${new URL(C.startsWith("http")?C:`https://${C}`).hostname}&sz=32`;tt(rt.NAVIGATION_SUCCESS,{url:C,year:y,mode:K,title:O||h}),fe({title:O||h,targetUrl:C,targetYear:y,favicon:N,addToHistory:!u})}},50)}},Ar=()=>{G.current&&G.current.dataset.navToken===ot.current.toString()&&setTimeout(()=>{if(G.current&&G.current.dataset.navToken===ot.current.toString())try{const t=b||p;tt(rt.NAVIGATION_ERROR,{url:t,type:"connection_error",status:404}),Ue({error:!0,type:"connection_error",status:404,message:`Cannot access ${t}. The website might be blocking access or requires authentication.`,details:"The page could not be loaded in the iframe. This could be due to security restrictions or network issues."},t)}catch(t){const r=`Cannot access the requested website. ${t instanceof Error?t.message:String(t)}`;tt(rt.NAVIGATION_ERROR,{url:b||p,type:"generic_error",error:r}),M(r,{error:!0,type:"generic_error",message:r})}},50)},W=l.useCallback(async(t=Oe||p,r=y,s=!1,m=null)=>{if(Gt("Internet Explorer requires an internet connection to navigate"))return;Ge(),se.current&&se.current.abort();const x=new AbortController;se.current=x,le&&St(),G.current&&i==="loading"&&(G.current.src="about:blank");const z=r==="current"?"now":parseInt(r)>new Date().getFullYear()?"future":"past",X=Date.now(),be=(t===p?p.trim():t).trim();de(be),ot.current=X,tt(rt.NAVIGATION_START,{url:be,year:r,mode:z}),ee(be,r,z,X);const O=be.startsWith("http")?be:`https://${be}`;try{if(z==="future"||z==="past"&&parseInt(r)<=1995){let C=!1;if(!s)try{console.log(`[IE] Checking REMOTE cache for ${O} in ${r}...`);const h=await fetch(`/api/iframe-check?mode=ai&url=${encodeURIComponent(O)}&year=${r}`);if(console.log(`[IE] Remote cache response status: ${h.status}, ok: ${h.ok}, content-type: ${h.headers.get("content-type")}`),h.ok&&(h.headers.get("content-type")||"").includes("text/html")){C=!0;const N=await h.text();console.log(`[IE] REMOTE cache HIT. Processing content (length: ${N.length})`);const _=N.match(/^<!--\s*TITLE:\s*(.*?)\s*-->/),Pr=_?_[1].trim():null,Gr=N.replace(/^<!--\s*TITLE:.*?-->\s*\n?/,"");P(O);const Vr=`https://www.google.com/s2/favicons?domain=${new URL(O).hostname}&sz=32`;fe({aiGeneratedHtml:Gr,title:Pr||O,targetUrl:O,targetYear:r,favicon:Vr,addToHistory:!0}),console.log("[IE] Returning early after remote cache hit.");return}else console.log("[IE] REMOTE cache MISS or invalid response.")}catch(h){console.warn("[IE] AI remote cache fetch failed",h)}if(C){console.error("[IE] Logic error: Should have returned on remote cache hit, but didn't!");return}console.log(`[IE] No cache hit (Remote: ${C}, Force: ${s}). Proceeding to generate...`),zt&&F&&zt(z);try{if(await Et(O,r,x.signal,null,m),x.signal.aborted)return}catch(h){if(x.signal.aborted)return;console.error("[IE] AI generation error:",h),Ue({error:!0,type:"ai_generation_error",message:"Failed to generate futuristic website. AI model may not be selected.",details:h instanceof Error?h.message:String(h)},O);return}}else{let C=O;if(z==="past")try{const h=await Cr(O,r);if(x.signal.aborted)return;if(h)C=h;else return await Et(O,r,x.signal,null,m),x.signal.aborted,void 0}catch(h){return x.signal.aborted||(console.warn(`[IE] Wayback Machine error for ${O}:`,h),await Et(O,r,x.signal,null,m),x.signal.aborted),void 0}else if(z==="now"){is(O)?(Os(O),C=O):C=`/api/iframe-check?url=${encodeURIComponent(O)}&theme=${encodeURIComponent(ue)}`;try{const N=await fetch(`/api/iframe-check?mode=check&url=${encodeURIComponent(O)}&theme=${encodeURIComponent(ue)}`,{signal:x.signal});if(x.signal.aborted)return;if(N.ok){const _=await N.json();_.title&&at(_.title)}}catch(N){if(N instanceof Error&&N.name==="AbortError")return;console.warn("[IE] iframe-check fetch failed:",N)}}C===b&&(C=`${C}${C.includes("?")?"&":"?"}_t=${Date.now()}`),Me(C),G.current&&(G.current.dataset.navToken=X.toString(),G.current.src=C)}}catch(C){x.signal.aborted||(console.error("[IE] Navigation error:",C),Ue({error:!0,type:"navigation_error",message:`Failed to navigate: ${C instanceof Error?C.message:String(C)}`,details:C instanceof Error?C.stack:void 0},O))}},[p,y,b,i,Z,le,u,Q,B,ee,Me,M,Et,St,fe,Ge,Ue,at,n,de,P,ue]),Te=l.useCallback(async(t,r)=>{Ae(!1),he(!1),W(t,r||y,!1)},[W,Ae,y]),er=l.useCallback(t=>{if(!t.trim()){const h=[];E.forEach(N=>{!N.children&&N.url&&h.push({title:N.title||"",url:N.url,type:"favorite",year:N.year,favicon:N.favicon})}),h.length&&E.forEach(N=>{N.children&&N.children.length>0&&N.children.forEach(_=>{_.url&&h.push({title:_.title||"",url:_.url,type:"favorite",year:_.year,favicon:_.favicon})})}),it(h),Ve(h.length>0?0:-1);return}const r=t.toLowerCase(),s=h=>{if(!h)return"";let N=h.trim().toLowerCase();return N=N.replace(/^(https?:\/\/|ftp:\/\/)/i,""),N=N.replace(/\/$/g,""),N=N.replace(/^www\./i,""),N},m=h=>{var N,_;return(N=h.title)!=null&&N.toLowerCase().includes(r)||(_=h.url)!=null&&_.toLowerCase().includes(r)?{title:h.title||"",url:h.url||"",type:"favorite",year:h.year,favicon:h.favicon,normalizedUrl:s(h.url||"")}:null},x=[];E.forEach(h=>{if(h.children)h.children.forEach(N=>{const _=m(N);_&&x.push(_)});else if(h.url){const N=m(h);N&&x.push(N)}});const z=T.filter(h=>{var N;return!h.url.startsWith("https://www.bing.com/search?q=")&&(((N=h.title)==null?void 0:N.toLowerCase().includes(r))||h.url.toLowerCase().includes(r))}).slice(0,5).map(h=>({title:h.title||h.url,url:h.url,type:"history",year:h.year,favicon:h.favicon,normalizedUrl:s(h.url)})),X=[...x,...z],be=new Set,C=X.filter(h=>!h.normalizedUrl||be.has(h.normalizedUrl)?!1:(be.add(h.normalizedUrl),!0)).map(h=>{const{normalizedUrl:N,..._}=h;return _});console.log("[IE Debug] Input:",t,"Is Valid:",It(t)),t.trim()&&!It(t)&&C.push({title:`Search "${t}"`,url:`bing:${t}`,type:"search",favicon:"/icons/bing.png"}),it(C),Ve(C.length>0?0:-1)},[E,T,It]),ct=l.useCallback(()=>{if(q<T.length-1){Ae(!0);const t=q+1;Fe(t);const r=T[t];W(r.url,r.year||"current",!1)}},[T,q,Fe,W,Ae]),tr=l.useCallback(()=>{if(q>0){Ae(!0);const t=q-1;Fe(t);const r=T[t];W(r.url,r.year||"current",!1)}},[T,q,Fe,W,Ae]),Dr=l.useCallback(()=>{const t=Q||(()=>{try{if(b&&b.startsWith("http"))return new URL(b).hostname;const r=b&&!b.startsWith("/")?b:p;if(r)return new URL(r.startsWith("http")?r:`https://${r}`).hostname}catch(r){console.error("[IE] Error extracting hostname for favorite title:",r)}return"Page"})();Pe(t),Be(!0)},[Q,b,p,Pe,Be]),Mr=l.useCallback(()=>{if(!ye)return;const t=p,s=`https://www.google.com/s2/favicons?domain=${(()=>{try{if(b&&b.startsWith("http"))return new URL(b).hostname;const m=b&&!b.startsWith("/")?b:t;if(m)return new URL(m.startsWith("http")?m:`https://${m}`).hostname}catch(m){console.error("[IE] Error extracting hostname for favorite icon:",m)}return"unknown.com"})()}&sz=32`;Re({title:ye,url:t,favicon:s,year:y!=="current"?y:void 0}),Be(!1)},[ye,Re,b,p,y,Be]),Fr=l.useCallback(()=>{ve(),ls.forEach(t=>Re(t)),Ze(!1)},[ve,Re,Ze]),Ur=l.useCallback(()=>{ve(),Qe(!1)},[ve,Qe]),zr=l.useCallback(()=>{se.current&&se.current.abort(),G.current&&(G.current.src="about:blank"),W(p,y,!0)},[W,p,y]),Or=l.useCallback(()=>{se.current&&se.current.abort(),ie(),le&&St(),G.current&&(G.current.src="about:blank"),Ge(),Se&&Se()},[ie,le,St,Ge,Se]),_r=l.useCallback(()=>{var t,r;(t=Ee.current)==null||t.focus(),(r=Ee.current)==null||r.select(),Ft(!0)},[]),Hr=l.useCallback(()=>{W("apple.com","2002")},[W]),Ot=l.useRef(!1),_e=l.useRef(null);l.useEffect(()=>{jt(qe(p))},[p]),l.useEffect(()=>{if(!Ot.current&&o){if(Ot.current=!0,console.log("[IE] Running initial navigation check. Received initialData:",v),v!=null&&v.shareCode){const t=v.shareCode,r=Pt(t);if(r){console.log(`[IE] Decoded share link from initialData prop: ${r.url} (${r.year})`),He.info("Opening shared page",{description:`${r.url}${r.year&&r.year!=="current"?` from ${r.year}`:""}`,duration:4e3}),setTimeout(()=>{W(r.url,r.year||"current",!1),f?et(f):Le("internet-explorer")},0),_e.current=v;return}else console.warn("[IE] Failed to decode share link code from initialData prop."),He.error("Invalid Share Link",{description:"The share link provided is invalid or corrupted.",duration:5e3})}if(v!=null&&v.url&&typeof v.url=="string"){const t=v.url,r=typeof v.year=="string"?v.year:"current";console.log(`[IE] Navigating based on initialData url/year: ${t} (${r})`),de(t),n(r),He.info("Opening requested page",{description:`${t}${r!=="current"?` from ${r}`:""}`,duration:4e3}),setTimeout(()=>{W(t,r,!1),f?et(f):Le("internet-explorer")},0),_e.current=v;return}console.log("[IE] Proceeding with default navigation."),setTimeout(()=>{W(p,y,!1)},0)}},[v,o,W,p,y,Le,et,f]),l.useEffect(()=>{if(!(!o||!v)&&_e.current!==v&&Ot.current===!0){console.log("[IE] Detected initialData change for open window:",v);const t=v;if(t.shareCode){const r=t.shareCode,s=Pt(r);s&&(console.log(`[IE] Navigating to shared link: ${s.url} (${s.year})`),He.info("Opening shared page",{description:`${s.url}${s.year&&s.year!=="current"?` from ${s.year}`:""}`,duration:4e3}),setTimeout(()=>{W(s.url,s.year||"current",!1),f?et(f):Le("internet-explorer")},50),_e.current=v)}else if(t.url&&typeof t.url=="string"){const r=t.url,s=typeof t.year=="string"?t.year:"current";console.log(`[IE] Navigating to direct url/year: ${r} (${s})`),He.info("Opening requested page",{description:`${r}${s!=="current"?` from ${s}`:""}`,duration:4e3}),setTimeout(()=>{W(r,s,!1),f?et(f):Le("internet-explorer")},50),_e.current=v}}},[o,v,W,Le,et,f]),l.useEffect(()=>{const t=r=>{if(r.detail.appId==="internet-explorer"){const s=r.detail.initialData;if(_e.current===s)return;if(s!=null&&s.shareCode){const m=s.shareCode;console.log("[IE] Received updateApp event with shareCode:",m);const x=Pt(m);x?(console.log(`[IE] Decoded share link from updateApp event: ${x.url} (${x.year})`),He.info("Opening shared page",{description:`${x.url}${x.year&&x.year!=="current"?` from ${x.year}`:""}`,duration:4e3}),setTimeout(()=>{W(x.url,x.year||"current",!1)},50),_e.current=s):(console.warn("[IE] Failed to decode share link code from updateApp event."),He.error("Invalid Share Link",{description:"The share link provided is invalid or corrupted.",duration:5e3}))}else if(s!=null&&s.url&&typeof s.url=="string"){const m=s.url,x=typeof s.year=="string"?s.year:"current";console.log(`[IE] Received updateApp event with direct url/year: ${m} (${x})`),He.info("Opening requested page",{description:`${m}${x!=="current"?` from ${x}`:""}`,duration:4e3}),setTimeout(()=>{W(m,x,!1)},50),_e.current=s}}};return window.addEventListener("updateApp",t),()=>{window.removeEventListener("updateApp",t)}},[W,U,d]),l.useEffect(()=>{const t=r=>{if(r.data&&r.data.type==="iframeNavigation"&&typeof r.data.url=="string")console.log(`[IE] Received navigation request from iframe: ${r.data.url}`),W(r.data.url,y);else if(r.data&&r.data.type==="goBack")console.log("[IE] Received back button request from iframe"),ct();else if(r.data&&r.data.type==="aiHtmlNavigation"&&typeof r.data.url=="string"){console.log(`[IE] Received navigation request from AI HTML preview: ${r.data.url}`);const s=$e.getState().aiGeneratedHtml,m=lt||s;W(r.data.url,y,!1,m)}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[y,W,ct,lt]),l.useEffect(()=>{o||(Se&&Se(),se.current&&se.current.abort(),G.current&&(G.current.src="about:blank"))},[o,Se]),l.useEffect(()=>{const t=Yt.current,r=s=>{t&&Math.abs(s.deltaY)>Math.abs(s.deltaX)&&(s.preventDefault(),t.scrollLeft+=s.deltaY)};return t&&t.addEventListener("wheel",r,{passive:!1}),()=>{t&&t.removeEventListener("wheel",r)}},[]),l.useEffect(()=>{!le&&!De&&i!=="loading"&&Se&&Se()},[le,De,i,Se]);const Wr=()=>{if(!(i==="loading"||le||De))return null;const t=p?$t(p):"unknown",r=Ne.getState().aiModel,s=r?`${r} `:"",m=ce!=="auto"?Fs(ce):"",x=re!=="auto"?Us(re):"";if(De)return e.jsxs("div",{className:"flex items-center gap-1",children:[ae&&e.jsx("span",{className:"text-gray-500",children:w("apps.internet-explorer.fetch")}),e.jsx("span",{children:w("apps.internet-explorer.fetchingContentForReconstruction",{hostname:t})})]});switch(K){case"future":return e.jsxs("div",{className:"flex items-center gap-1",children:[ae&&e.jsxs("span",{className:"text-gray-500",children:[s,ce!=="auto"&&` ${m}`,re!=="auto"&&` ${x}`]}),e.jsx("span",{children:w("apps.internet-explorer.reimaginingForYear",{hostname:t,year:y})})]});case"past":return parseInt(y)<=1995?e.jsxs("div",{className:"flex items-center gap-1",children:[ae&&e.jsxs("span",{className:"text-gray-500",children:[s,ce!=="auto"&&` ${m}`,re!=="auto"&&` ${x}`]}),e.jsx("span",{children:w("apps.internet-explorer.reconstructingHistoryForYear",{hostname:t,year:y})})]}):w("apps.internet-explorer.fetchingFromYear",{hostname:t,year:y});case"now":return w("apps.internet-explorer.loading",{hostname:t});default:return w("apps.internet-explorer.loading",{hostname:t})}},Br=l.useMemo(()=>{const t=r=>{if(r==="current")return new Date().getFullYear()+.5;if(r.endsWith(" BC"))return-parseInt(r.replace(" BC",""),10);if(r.endsWith(" CE"))return parseInt(r.replace(" CE",""),10);const s=parseInt(r,10);return isNaN(s)?1/0:s};return[...je].sort((r,s)=>t(r)-t(s))},[je]),rr=l.useCallback(()=>{Lt(!0)},[]),pt=ue==="xp"||ue==="win98",Je=os(),sr=e.jsx($s,{isWindowOpen:o,isForeground:d,onRefresh:zr,onStop:Or,onFocusUrlInput:_r,onHome:Hr,onShowHelp:()=>Xe(!0),onShowAbout:()=>Ye(!0),isLoading:kr,favorites:E,history:T,onAddFavorite:Dr,onClearFavorites:()=>Qe(!0),onResetFavorites:()=>Ze(!0),onNavigateToFavorite:(t,r)=>Te(t,r),onNavigateToHistory:Te,onGoBack:ct,onGoForward:tr,canGoBack:q<T.length-1,canGoForward:q>0,onClearHistory:()=>nt(!0),onOpenTimeMachine:()=>k(!0),onClose:c,onEditFuture:()=>yt(!0),language:ce,location:re,year:y,onLanguageChange:vt,onLocationChange:Mt,onYearChange:t=>W(p,t),onSharePage:rr,skipInitialSound:$,instanceId:f,onNavigateNext:j,onNavigatePrevious:te});return o?e.jsxs(e.Fragment,{children:[!pt&&d&&sr,e.jsx(dr,{children:e.jsxs(cs,{title:Sr,onClose:c,isForeground:d,appId:"internet-explorer",skipInitialSound:$,instanceId:f,onNavigateNext:j,onNavigatePrevious:te,menuBar:pt?sr:void 0,children:[e.jsxs("div",{className:"flex flex-col h-full w-full relative",children:[e.jsxs("div",{className:`flex flex-col gap-1 p-1 ${pt?"bg-transparent border-b border-[#919b9c]":ue==="macosx"?"bg-transparent":ue==="system7"?"bg-gray-100 border-b border-black":"bg-gray-100 border-b border-gray-300"}`,style:{borderBottom:ue==="macosx"?"var(--os-metrics-titlebar-border-width, 1px) solid var(--os-color-titlebar-border-inactive, rgba(0, 0, 0, 0.2))":void 0},children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex gap-0 items-center",children:[e.jsx(Ie,{variant:"ghost",size:"icon",onClick:ct,disabled:Je||q>=T.length-1,className:"h-8 w-8",children:e.jsx(ps,{className:"h-4 w-4"})}),e.jsx(Ie,{variant:"ghost",size:"icon",onClick:tr,disabled:Je||q<=0,className:"h-8 w-8",children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx(Ie,{variant:"ghost",size:"icon",onClick:rr,className:"h-8 w-8 focus-visible:ring-0 focus-visible:ring-offset-0","aria-label":"Share this page",children:e.jsx(gr,{className:"h-4 w-4"})})}),e.jsx(gt,{side:"bottom",children:e.jsx("p",{children:"Share this page"})})]})]}),e.jsxs("div",{className:"flex-1 relative flex items-center",children:[e.jsx(us,{ref:Ee,value:Oe,disabled:Je,onChange:t=>{const r=qe(t.target.value);jt(r),er(r),he(!0)},onKeyDown:t=>{var r;if(Je&&t.key==="Enter"){Gt("Internet Explorer requires an internet connection to navigate");return}if(t.key==="Enter")if(he(!1),xe.length>0){const s=xe[kt];if(s.type==="search"){const m=s.url.substring(5);Te(`https://www.bing.com/search?q=${encodeURIComponent(m)}`,"current")}else Te(s.url,s.year)}else It(Oe)?(de(Oe),W(Oe)):jt(qe(p));else if(t.key==="Escape")he(!1),jt(qe(p));else if(t.key==="ArrowDown"&&xe.length>0){t.preventDefault();const s=kt<0?0:kt===0?1:Math.min(kt+1,xe.length-1);Ve(s);const m=document.querySelector("[data-dropdown-content]"),x=m==null?void 0:m.querySelectorAll("[data-dropdown-item]"),z=x==null?void 0:x[s];z?z.focus():(r=Ee.current)==null||r.focus()}},onBlur:t=>{(!t.relatedTarget||!t.relatedTarget.hasAttribute("data-dropdown-item"))&&setTimeout(()=>he(!1),150),Ft(!1)},onFocus:()=>{wr||(Ft(!0),setTimeout(()=>{Ee.current&&Ee.current.select()},0)),er(Oe),he(!0)},className:`flex-1 pl-2 pr-8 ${pt?"!text-[11px]":ue==="macosx"?"!text-[12px] h-[26px]":"!text-[16px]"} `,style:ue==="macosx"?{paddingTop:"2px",paddingBottom:"2px"}:void 0,placeholder:"Enter URL",spellCheck:"false",autoComplete:"off",autoCapitalize:"off"}),ge&&xe.length>0&&(Oe.trim()===""||!(xe.length===1&&Xt(xe[0].url)===Xt(Oe)))&&e.jsx("div",{style:Nt,className:"absolute top-full left-0 right-0 mt-[2px] bg-white border border-neutral-300 shadow-md rounded-md z-50 max-h-48 overflow-y-auto font-geneva-12","data-dropdown-content":!0,children:xe.map((t,r)=>e.jsxs("div",{className:"px-2 py-1.5 hover:bg-gray-100 focus:bg-gray-200 cursor-pointer flex items-center gap-2 text-sm outline-none",onClick:()=>{if(Ve(r),t.type==="search"){const s=t.url.substring(5);Te(`https://www.bing.com/search?q=${encodeURIComponent(s)}`,"current")}else Te(t.url,t.year)},onKeyDown:s=>{var m,x;if(s.key==="Enter")if(s.preventDefault(),t.type==="search"){const z=t.url.substring(5);Te(`https://www.bing.com/search?q=${encodeURIComponent(z)}`,"current")}else Te(t.url,t.year);else if(s.key==="ArrowDown"){s.preventDefault();const z=s.currentTarget.nextElementSibling;z&&(Ve(r+1),z.focus())}else if(s.key==="ArrowUp"){s.preventDefault();const z=s.currentTarget.previousElementSibling;z?(Ve(r-1),z.focus()):(m=Ee.current)==null||m.focus()}else s.key==="Escape"&&(s.preventDefault(),he(!1),(x=Ee.current)==null||x.focus())},onFocus:()=>{he(!0),Ve(r)},tabIndex:0,"data-dropdown-item":!0,children:[t.type==="search"?e.jsx(js,{className:"w-4 h-4 text-neutral-400"}):t.favicon&&!Je?e.jsx("img",{src:t.favicon,alt:"",className:"w-4 h-4",onError:s=>{s.currentTarget.src="/icons/default/ie-site.png"}}):e.jsx(Ke,{name:"ie-site.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),e.jsxs("div",{className:"flex-1 truncate",children:[e.jsxs("div",{className:"font-medium font-geneva-12 text-[11px]",children:[t.title,t.year&&t.year!=="current"&&e.jsxs("span",{className:"font-normal text-gray-500 ml-1",children:["(",t.year,")"]})]}),e.jsx("div",{className:"font-geneva-12 text-[10px] text-gray-500 truncate",children:t.type==="search"?"bing.com":qe(t.url)})]}),e.jsxs("div",{className:"font-geneva-12 text-[10px] ml-2 text-gray-500 whitespace-nowrap hidden sm:block",children:[t.type==="favorite"&&"Favorite",t.type==="history"&&"History",t.type==="search"&&"Search"]})]},`${t.type}-${r}`))}),e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx(Ie,{variant:"ghost",size:"icon",onClick:()=>k(!0),disabled:a||je.length<=1,className:`h-7 w-7 absolute right-1 top-1/2 -translate-y-1/2 focus-visible:ring-0 focus-visible:ring-offset-0 ${je.length>1?"":"opacity-50 cursor-not-allowed"}`,"aria-label":"Show cached versions (Time Machine)",style:{pointerEvents:je.length<=1?"none":"auto"},children:e.jsx(Ts,{className:`h-4 w-4 ${je.length>1?"text-orange-500":"text-neutral-400"}`})})}),je.length>1&&e.jsx(gt,{side:"bottom",children:e.jsxs("p",{children:[je.length," Time Node",je.length!==1?"s":""]})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(lr,{value:y,onValueChange:t=>W(p,t),children:[e.jsx(or,{className:pt?"!text-[11px]":ue==="macosx"?"!text-[12px]":"!text-[16px]",children:e.jsx(cr,{placeholder:"Year"})}),e.jsxs(pr,{className:"px-0",children:[Zt.map(t=>e.jsx(Dt,{value:t,className:"text-md h-6 px-3 active:bg-gray-900 active:text-white text-blue-600",children:t},t)),e.jsx(Dt,{value:"current",className:"text-md h-6 px-3 active:bg-gray-900 active:text-white",children:w("apps.internet-explorer.now")}),vr.map(t=>e.jsx(Dt,{value:t,className:`text-md h-6 px-3 active:bg-gray-900 active:text-white ${parseInt(t)<=1995?"text-blue-600":""}`,children:t},t))]})]})})]}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{ref:Yt,className:"overflow-x-auto scrollbar-none relative flex-1",children:e.jsx("div",{className:"flex items-center min-w-full w-max",children:E.map((t,r)=>t.children&&t.children.length>0?e.jsxs(ur,{children:[e.jsx(mr,{asChild:!0,children:e.jsxs(Ie,{variant:"ghost",size:"sm",className:"whitespace-nowrap hover:bg-gray-200 font-geneva-12 text-[10px] gap-1 px-1 mr-1 w-content min-w-[60px] max-w-[120px] flex-shrink-0",children:[e.jsx(Ke,{name:"directory.png",alt:"Folder",className:"w-4 h-4 mr-1 [image-rendering:pixelated]"}),e.jsx("span",{className:"truncate",children:t.title})]})}),e.jsx(hr,{align:"start",sideOffset:4,className:"px-0 max-w-xs",onCloseAutoFocus:s=>s.preventDefault(),children:t.children.map(s=>e.jsxs(xr,{onClick:()=>Te(ir(s.url),s.year),className:"text-md h-6 px-3 active:bg-gray-900 active:text-white flex items-center gap-2",children:[s.favicon&&!Je?e.jsx("img",{src:s.favicon,alt:"",className:"w-4 h-4",onError:m=>{m.currentTarget.src="/icons/default/ie-site.png"}}):e.jsx(Ke,{name:"ie-site.png",alt:"",className:"w-4 h-4 [image-rendering:pixelated]"}),s.title,s.year&&s.year!=="current"&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",s.year,")"]})]},s.url))})]},r):t.url?e.jsxs(Ie,{variant:"ghost",size:"sm",className:"whitespace-nowrap hover:bg-gray-200 font-geneva-12 text-[10px] gap-1 px-1 mr-1 w-content min-w-[60px] max-w-[120px] flex-shrink-0",onClick:s=>{const m=ir(t.url);Te(m,t.year),s.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},children:[t.favicon&&!Je?e.jsx("img",{src:t.favicon,alt:"Site",className:"w-4 h-4 mr-1",onError:s=>{s.currentTarget.src="/icons/default/ie-site.png"}}):e.jsx(Ke,{name:"ie-site.png",alt:"Site",className:"w-4 h-4 mr-1 [image-rendering:pixelated]"}),e.jsx("span",{className:"truncate",children:t.title})]},r):null)})}),E.length>0&&ze&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-gray-100 to-transparent pointer-events-none"})]})]}),e.jsxs("div",{className:"flex-1 relative bg-white",children:[J?Er():jr||K==="past"&&(le||B!==null)?e.jsx("div",{className:"w-full h-full overflow-hidden absolute inset-0 font-geneva-12",children:e.jsx(fr,{htmlContent:le?lt||"":B||"",onInteractionChange:()=>{},className:"border-none",maxHeight:"none",minHeight:"100%",initialFullScreen:!1,isInternetExplorer:!0,isStreaming:le&&lt!==B,playElevatorMusic:zt,stopElevatorMusic:Se,playDingSound:yr,baseUrlForAiContent:p,mode:K})}):e.jsx("iframe",{ref:G,src:b||"",className:"border-0 block",style:{width:"calc(100% + 1px)",height:"calc(100% + 1px)"},sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-pointer-lock",onLoad:Rr,onError:Ar}),!d&&e.jsx("div",{className:"absolute inset-0 bg-transparent z-50",onClick:()=>U("internet-explorer"),onMouseDown:()=>U("internet-explorer"),onTouchStart:()=>U("internet-explorer"),onWheel:()=>U("internet-explorer"),onDragStart:()=>U("internet-explorer"),onKeyDown:()=>U("internet-explorer")}),e.jsx(st,{children:(i==="loading"||le||De)&&e.jsx(ke.div,{className:"absolute top-0 left-0 right-0 bg-white/75 backdrop-blur-sm overflow-hidden z-40",variants:Nr,initial:"hidden",animate:"visible",exit:"hidden",children:e.jsx("div",{className:`h-full ${le&&K==="past"&&parseInt(y)<=1995?"animate-progress-indeterminate-orange-reverse":le?"animate-progress-indeterminate-orange":De&&K==="past"?"animate-progress-indeterminate-green-reverse":De?"animate-progress-indeterminate-green":K==="past"&&!le?"animate-progress-indeterminate-reverse":"animate-progress-indeterminate"}`})})})]}),e.jsx(st,{children:(i==="loading"||le&&lt!==B||De)&&e.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.15},className:`os-status-bar os-status-bar-text font-geneva-12 absolute bottom-0 left-0 right-0 bg-gray-100 text-[10px] px-2 py-1 flex items-center z-50 ${ue==="system7"?"border-t border-black":"border-t border-gray-300"}`,children:e.jsx("div",{className:"flex-1 truncate",children:Wr()})})})]}),e.jsx(ms,{isOpen:oe,onOpenChange:Be,onSubmit:Mr,title:"Add Favorite",description:"Enter a title for this favorite",value:ye,onChange:Pe}),e.jsx(hs,{isOpen:V,onOpenChange:Xe,helpItems:I,appId:"internet-explorer"}),e.jsx(xs,{isOpen:Y,onOpenChange:Ye,metadata:fs,appId:"internet-explorer"}),e.jsx(Bt,{isOpen:g,onOpenChange:Qe,onConfirm:Ur,title:"Clear Favorites",description:"Are you sure you want to clear all favorites?"}),e.jsx(Bt,{isOpen:Ce,onOpenChange:nt,onConfirm:()=>{wt(),nt(!1)},title:"Clear History",description:"Are you sure you want to clear all history?"}),e.jsx(Bt,{isOpen:L,onOpenChange:Ze,onConfirm:Fr,title:"Reset Favorites",description:"Are you sure you want to reset favorites to default?"}),e.jsx(Ds,{isOpen:H,onOpenChange:yt}),e.jsx(Ms,{isOpen:me,onClose:()=>k(!1),cachedYears:Br,currentUrl:p,currentSelectedYear:y,onSelectYear:t=>{W(p,t)}})]})}),e.jsx(Kt,{isOpen:$r,onClose:()=>Lt(!1),itemType:"Page",itemIdentifier:p,secondaryIdentifier:y,title:Q||p,generateShareUrl:Ir})]}):null}export{nn as InternetExplorerAppComponent};
